@{
    ViewData["Title"] = "Kontakt";
}

<section class="contact-hero text-center">
    <div class="contact-hero-overlay">
        <h1 class="display-4 fw-bold">Kontakta Oss</h1>
        <p class="lead">Vi finns här för dig - hör av dig när som helst!</p>
    </div>
</section>

<section class="contact-section py-5">
    <div class="container">
        <div class="row g-4">
            <!-- Kontaktinformation -->
            <div class="col-lg-5">
                <div class="contact-info-card h-100">
                    <h2 class="fw-bold mb-4">Pegasus Transport</h2>
                    <p class="text-muted mb-4">
                        Din pålitliga partner för resor till och från Arlanda. Vi finns tillgängliga för att svara på dina frågor och ta emot dina bokningar.
                    </p>

                    <div class="contact-info-item">
                        <div class="contact-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z" />
                            </svg>
                        </div>
                        <div>
                            <h5 class="mb-1">E-post</h5>
                            <a href="mailto:info@pegasustransport.se">info@pegasustransport.se</a>
                        </div>
                    </div>

                    <div class="contact-info-item">
                        <div class="contact-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.568 17.568 0 0 0 4.168 6.608 17.569 17.569 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.678.678 0 0 0-.58-.122l-2.19.547a1.745 1.745 0 0 1-1.657-.459L5.482 8.062a1.745 1.745 0 0 1-.46-1.657l.548-2.19a.678.678 0 0 0-.122-.58L3.654 1.328zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z" />
                            </svg>
                        </div>
                        <div>
                            <h5 class="mb-1">Telefon</h5>
                            <a href="tel:+46701234567">+46 70 123 45 67</a>
                        </div>
                    </div>

                    <div class="contact-info-item">
                        <div class="contact-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" />
                            </svg>
                        </div>
                        <div>
                            <h5 class="mb-1">Adress</h5>
                            <p class="mb-0">
                                Pegasus Transport AB<br>
                                Arlanda Flygplatsväg 101<br>
                                190 45 Stockholm-Arlanda
                            </p>
                        </div>
                    </div>

                    <div class="contact-info-item">
                        <div class="contact-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z" />
                            </svg>
                        </div>
                        <div>
                            <h5 class="mb-1">Öppettider</h5>
                            <p class="mb-0">
                                Alla dagar: 00:00 - 23:59<br>
                                <small class="text-muted">Boka i förväg för bästa tillgänglighet</small>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kontaktformulär -->
            <div class="col-lg-7">
                <div class="contact-form-card">
                    <h2 class="fw-bold mb-4">Skicka ett Meddelande</h2>

                    <form action="https://api.web3forms.com/submit" method="POST" id="contactForm">
                        <!-- Ersätt med din egna Web3Forms Access Key -->
                        <input type="hidden" name="access_key" value="YOUR_ACCESS_KEY_HERE">
                        <input type="hidden" name="subject" value="Nytt meddelande från Pegasus Transport webbplats">
                        <input type="hidden" name="from_name" value="Pegasus Transport Kontaktformulär">

                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="name" class="form-label">Namn *</label>
                                <input type="text" class="form-control contact-input" id="name" name="name" required>
                            </div>
                            <div class="col-md-6">
                                <label for="email" class="form-label">E-post *</label>
                                <input type="email" class="form-control contact-input" id="email" name="email" required>
                            </div>
                            <div class="col-md-6">
                                <label for="phone" class="form-label">Telefon</label>
                                <input type="tel" class="form-control contact-input" id="phone" name="phone">
                            </div>
                            <div class="col-md-6">
                                <label for="subject" class="form-label">Ämne</label>
                                <select class="form-select contact-input" id="subject" name="message_subject">
                                    <option value="">Välj ämne...</option>
                                    <option value="Bokning">Bokning</option>
                                    <option value="Fråga">Allmän fråga</option>
                                    <option value="Återkoppling">Återkoppling</option>
                                    <option value="Övrigt">Övrigt</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label for="message" class="form-label">Meddelande *</label>
                                <textarea class="form-control contact-input" id="message" name="message" rows="5" required></textarea>
                            </div>
                            <div class="col-12">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="consent" name="consent" required>
                                    <label class="form-check-label" for="consent">
                                        Jag samtycker till att mina uppgifter behandlas enligt GDPR *
                                    </label>
                                </div>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn contact-submit-btn">
                                    <span class="btn-text">Skicka Meddelande</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </form>

                    <div id="result" class="mt-3"></div>
                </div>
            </div>
        </div>

        <!-- Google Maps -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="map-container">
                    <h2 class="fw-bold mb-4 text-center">Hitta Till Oss</h2>
                    <div class="map-wrapper">
                        <!-- Ersätt med din faktiska Google Maps embed kod -->
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2016.8516841766956!2d17.918625776899973!3d59.64976107460097!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x465f9d7377b4f5c7%3A0x8b0de8d7f8d8a3ab!2sStockholm%20Arlanda%20Airport!5e0!3m2!1sen!2sse!4v1698765432100!5m2!1sen!2sse"
                                width="100%"
                                height="450"
                                style="border:0;"
                                allowfullscreen=""
                                loading="lazy"
                                referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        const form = document.getElementById('contactForm');
        const result = document.getElementById('result');

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(form);
            const object = Object.fromEntries(formData);
            const json = JSON.stringify(object);

            result.innerHTML = '<div class="alert alert-info">Skickar meddelande...</div>';

            fetch('https://api.web3forms.com/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: json
            })
            .then(async (response) => {
                let json = await response.json();
                if (response.status == 200) {
                    result.innerHTML = '<div class="alert alert-success">Tack för ditt meddelande! Vi återkommer inom kort.</div>';
                    form.reset();
                } else {
                    console.log(response);
                    result.innerHTML = '<div class="alert alert-danger">' + json.message + '</div>';
                }
            })
            .catch(error => {
                console.log(error);
                result.innerHTML = '<div class="alert alert-danger">Något gick fel. Försök igen senare.</div>';
            })
            .then(function() {
                setTimeout(() => {
                    result.style.display = 'none';
                }, 5000);
            });
        });
    </script>
}
