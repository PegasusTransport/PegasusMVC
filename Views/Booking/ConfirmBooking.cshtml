@using Pegasus_MVC.ViewModels
@model BookingPreviewVM

<div style="max-width: 800px; margin: 40px auto; padding: 20px;">
    <h2 style="color: #28a745; border-bottom: 2px solid #28a745; padding-bottom: 10px;">
        Confirm Your Booking
    </h2>

    @if (ViewBag.ErrorMessage != null)
    {
        <div class="alert alert-danger">@ViewBag.ErrorMessage</div>
    }

    <form asp-controller="Booking" asp-action="ConfirmBooking" method="post">
        <input type="hidden" name="stateId" value="@ViewBag.StateId" />
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3>Customer Details</h3>
            <p><strong>Name:</strong> @Model.FirstName @Model.LastName</p>
            <p><strong>Email:</strong> @Model.Email</p>
            <p><strong>Phone:</strong> @Model.PhoneNumber</p>
        </div>

        <div style="background: #fff; padding: 20px; border: 1px solid #dee2e6; border-radius: 8px; margin: 20px 0;">
            <h3>Trip Details</h3>
            <p><strong>📅 Pickup:</strong> @Model.PickUpDateTime.ToString("yyyy-MM-dd HH:mm")</p>
            <p><strong>📍 From:</strong> @Model.PickUpAddress</p>

            @if (!string.IsNullOrEmpty(Model.FirstStopAddress))
            {
                <p><strong>🛑 Stop 1:</strong> @Model.FirstStopAddress</p>
            }

            @if (!string.IsNullOrEmpty(Model.SecondStopAddress))
            {
                <p><strong>🛑 Stop 2:</strong> @Model.SecondStopAddress</p>
            }

            <p><strong>🏁 To:</strong> @Model.DropOffAddress</p>

            @if (!string.IsNullOrEmpty(Model.Flightnumber))
            {
                <p><strong>✈️ Flight:</strong> @Model.Flightnumber</p>
            }

            @if (!string.IsNullOrEmpty(Model.Comment))
            {
                <p><strong>💬 Comment:</strong> @Model.Comment</p>
            }
        </div>

        <div style="background: #d4edda; padding: 20px; border-radius: 8px; margin: 20px 0; border: 1px solid #c3e6cb;">
            <h3 style="color: #155724;">Price Calculation</h3>
            <p><strong>Distance:</strong> @Model.DistanceKm.ToString("0.00") km</p>
            <p><strong>Duration:</strong> @Model.DurationMinutes.ToString("0") minutes</p>
            <p style="font-size: 1.5rem; color: #155724; margin-top: 15px;">
                <strong>Total Price:</strong> @Model.Price.ToString("0.00") SEK
            </p>
        </div>

        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
            <a asp-controller="Booking" asp-action="Index"
               class="btn btn-secondary"
               style="padding: 12px 30px;">
                ← Go Back
            </a>
            <button type="submit"
                    class="btn btn-success"
                    style="padding: 12px 30px;">
                ✓ Confirm Booking
            </button>
        </div>
    </form>
</div>